
<style type="text/css">
	

	ul.team_list{
    list-style:none;
    padding:0;
    min-height:12em;
}
ul.team_list li:nth-child(2n){
    background-color:#a6dbed;
}
.teams{
    margin:10px;
	background-color: #13C4A5;
    padding: 10px;
}
li {
	cursor:move;
}

</style>

	<script type="text/javascript">
	function addDesigner(button){
		$('#add-user').modal();
		var s = button;
	}
	$(function() {
		users = <%= @users.to_json.html_safe %>;
		for (var i = 0; i < users.length; i++){
			users[i].label=users[i].first_name + " " + users[i].last_name;
		}
		$("#add-user-input").autocomplete({
			source: users
		}).data("uiAutocomplete")._renderItem = function(ul, item) {
			return $("<li>").data("item.autocomplete", item).append("<a>" + item.first_name + "</a>").appendTo(ul);
		};
	});
	</script>
<div class="row">


	<!-- SIDEBAR NAVIGATION -->
	<div class="col-sm-2">
		<%= render 'navigation/teams_sidebar_nav' %>
	</div>

	<div class="col-sm-7">

		<% @teams.each do |team| %>
		<div class="section">
		<div class="teams">
			<h1><%= team.name %></h1>
				<ul class="team_list">
			
			<!-- drop designers here -->

			</ul>
			<%= link_to "Delete Team", team, method: :delete, data: { confirm: "You sure?" } %>
			<a href="#add-user" onclick="addDesigner(<%= team.id %>)">Add Designers</a>
			<% team.users.each do |user| %>

		</div> <!-- end teams class -->
			<div class="row">
				<div class="col-lg-4">
					<h3><%= user.first_name %> <%= user.last_name %></h3>
					<strong><%= user.privilege %></strong>
					<div class="well">
						<p></p>
					</div>
				</div>
			</div>
			<% end %>
		</div>
		<% end %>
	</div>
	<div class="col-sm-3 sidebar">

	<h2>Designers</h2>
	<ul id="users_list">
	<% @users.each do |user| %>
	<li><%= user.first_name %> <%= user.last_name %>
</li>
<% end %>
	</ul>
	</div>

</div>

<div class="modal fade" id="add-user" tabindex="0" role="dialog" aria-hidden="true" aria-labelledby="add-user-label">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title" id="add-user-label">Add Designers</h4>
			</div>
			<div class="modal-body">
				<input id="add-user-input">
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>


<script type="text/javascript">

$("#users_list").sortable({
    connectWith: ".team_list"
});
$(".team_list").sortable();

$(".team_list li").dblclick(function(ev){
    $(this).prependTo("#users_list");
});
</script>
